!function(){"use strict";function a(){var a=document.getElementById("img"),b=location.hash;if(b.length<2)return void alert("empty URL");if("undefined"==typeof XMLHttpRequest||"undefined"==typeof URL||"undefined"==typeof URL.createObjectURL||"undefined"==typeof ArrayBuffer||"undefined"==typeof DataView){var c=document.createElement("a");return c.setAttribute("href","/gif/playback/"+b.substr(1)),c.textContent="JavaScriptでの変換に未対応のブラウザのため、ImageMagickでの変換を試してください。",document.body.innerHTML="",void document.body.appendChild(c)}var d=new XMLHttpRequest,e=!1;d.open("GET",b.substr(1),!0),d.responseType="arraybuffer",d.onerror=function(a){return e?(alert("image load error"),!0):(e=!0,d.open("GET","//allow-any-origin.appspot.com/"+b.substr(1),!0),void d.send())},d.onload=function(b){var c=b.target.response;if(Worker){var d=new Worker("/js/task.min.js?1");d.onmessage=function(b){a.src=b.data.src},d.postMessage({buffer:c,action:"reverse"})}else{var e=window.gifken.Gif.parse(c);a.src=URL.createObjectURL(window.gifken.GifPresenter.writeToBlob(e.playback(!0).writeToArrayBuffer()))}},d.send()}addEventListener("load",a,!1)}();