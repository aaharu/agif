!function(){"use strict";function a(){var a=location.hash;if(a.length<2)return void alert("empty URL");if("undefined"==typeof XMLHttpRequest||"undefined"==typeof URL||"undefined"==typeof URL.createObjectURL||"undefined"==typeof ArrayBuffer||"undefined"==typeof DataView){var b=document.createElement("a");return b.setAttribute("href","/gif/playback/"+a.substr(1)),b.textContent="JavaScriptでの変換に未対応のブラウザのため、ImageMagickでの変換を試してください。",document.body.innerHTML="",void document.body.appendChild(b)}var c=new XMLHttpRequest,d=!1;c.open("GET",a.substr(1),!0),c.responseType="arraybuffer",c.onerror=function(b){return d?(alert("image load error"),!0):(d=!0,c.open("GET","//allow-any-origin.appspot.com/"+a.substr(1),!0),void c.send())},c.onload=function(a){var b=a.target.response,c=document.getElementById("content");if(Worker){var d=new Worker("/js/task.min.js?1");d.onmessage=function(a){for(;c.firstChild;)c.removeChild(c.firstChild);a.data.src_list.forEach(function(a){var b=new Image;b.src=a,c.appendChild(b)})},d.postMessage({buffer:b,action:"split"})}else{for(var e=gifken.Gif.parse(b);c.firstChild;)c.removeChild(c.firstChild);e.split(!0).forEach(function(a){var b=new Image,d=gifken.GifPresenter.writeToBlob(a.writeToArrayBuffer());b.src=URL.createObjectURL(d),c.appendChild(b)})}},c.send()}addEventListener("load",a,!1)}();